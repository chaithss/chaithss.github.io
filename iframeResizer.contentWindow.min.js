(function(c){'use strict';function d(Sa,Ta,Ua){'addEventListener'in window?Sa.addEventListener(Ta,Ua,!1):'attachEvent'in window&&Sa.attachEvent('on'+Ta,Ua)}function f(Sa,Ta,Ua){'removeEventListener'in window?Sa.removeEventListener(Ta,Ua,!1):'detachEvent'in window&&Sa.detachEvent('on'+Ta,Ua)}function g(Sa){return Sa.charAt(0).toUpperCase()+Sa.slice(1)}function h(Sa){var Ta,Ua,Va,Wa=null,Xa=0,Ya=function(){Xa=Oa(),Wa=null,Va=Sa.apply(Ta,Ua),Wa||(Ta=Ua=null)};return function(){var Za=Oa();Xa||(Xa=Za);var $a=Ea-(Za-Xa);return Ta=this,Ua=arguments,0>=$a||$a>Ea?(Wa&&(clearTimeout(Wa),Wa=null),Xa=Za,Va=Sa.apply(Ta,Ua),!Wa&&(Ta=Ua=null)):!Wa&&(Wa=setTimeout(Ya,$a)),Va}}function j(Sa){return sa+'['+ua+'] '+Sa}function k(Sa){ra&&'object'==typeof window.console&&console.log(j(Sa))}function l(Sa){'object'==typeof window.console&&console.warn(j(Sa))}function m(){n(),k('Initialising iFrame ('+location.href+')'),o(),r(),q('background',aa),q('padding',ea),G(),w(),z(),s(),I(),A(),oa=H(),T('init','Init message from host page'),Ka(),window.parentIFrame.sendMessage({currentURL:window.location.href})}function n(){function Sa(Ua){return!('true'!==Ua)}var Ta=na.substr(ta).split(':');ua=Ta[0],ba=c===Ta[1]?ba:+Ta[1],fa=c===Ta[2]?fa:Sa(Ta[2]),ra=c===Ta[3]?ra:Sa(Ta[3]),pa=c===Ta[4]?pa:+Ta[4],$=c===Ta[6]?$:Sa(Ta[6]),ca=Ta[7],la=c===Ta[8]?la:Ta[8],aa=Ta[9],ea=Ta[10],Ba=c===Ta[11]?Ba:+Ta[11],oa.enable=c!==Ta[12]&&Sa(Ta[12]),xa=c===Ta[13]?xa:Ta[13],Ha=c===Ta[14]?Ha:Ta[14]}function o(){function Ta(Ua,Va){return'function'==typeof Ua&&(k('Setup custom '+Va+'CalcMethod'),Ma[Va]=Ua,Ua='custom'),Ua}'iFrameResizer'in window&&Object===window.iFrameResizer.constructor&&(function(){var Ua=window.iFrameResizer;k('Reading data from page: '+JSON.stringify(Ua)),Ja='messageCallback'in Ua?Ua.messageCallback:Ja,Ka='readyCallback'in Ua?Ua.readyCallback:Ka,Aa='targetOrigin'in Ua?Ua.targetOrigin:Aa,la='heightCalculationMethod'in Ua?Ua.heightCalculationMethod:la,Ha='widthCalculationMethod'in Ua?Ua.widthCalculationMethod:Ha}(),la=Ta(la,'height'),Ha=Ta(Ha,'width')),k('TargetOrigin for parent set to: '+Aa)}function p(Sa,Ta){return-1!==Ta.indexOf('-')&&(l('Negative CSS value ignored for '+Sa),Ta=''),Ta}function q(Sa,Ta){c!==Ta&&''!==Ta&&'null'!==Ta&&(document.body.style[Sa]=Ta,k('Body '+Sa+' set to "'+Ta+'"'))}function r(){c===ca&&(ca=ba+'px'),q('margin',p('margin',ca))}function s(){document.documentElement.style.height='',document.body.style.height='',k('HTML & body height set to "auto"')}function t(Sa){var Ta={add:function(Ua){function Va(){T(Sa.eventName,Sa.eventType)}if(Na[Ua]=Va,'custom'===Sa.eventType){var Wa=document.getElementsByTagName('button');for(var Xa of Wa)d(Xa,Ua,Va);var Ya=document.getElementsByTagName('a');for(var Za of Ya)d(Za,Ua,Va)}else d(window,Ua,Va)},remove:function(Ua){var Va=Na[Ua];delete Na[Ua],f(window,Ua,Va)}};Sa.eventNames&&Array.prototype.map?(Sa.eventName=Sa.eventNames[0],Sa.eventNames.map(Ta[Sa.method])):Ta[Sa.method](Sa.eventName),k(g(Sa.method)+' event listener: '+Sa.eventType)}function u(Sa){t({method:Sa,eventType:'custom',eventName:'click'}),t({method:Sa,eventType:'User input',eventName:'input'}),t({method:Sa,eventType:'User touch start',eventName:'touchstart'}),t({method:Sa,eventType:'User touch end',eventName:'touchend'}),t({method:Sa,eventType:'User touch cancel',eventName:'touchcancel'}),t({method:Sa,eventType:'User scroll',eventName:'scroll'}),t({method:Sa,eventType:'Animation Start',eventNames:['animationstart','webkitAnimationStart']}),t({method:Sa,eventType:'Animation Iteration',eventNames:['animationiteration','webkitAnimationIteration']}),t({method:Sa,eventType:'Animation End',eventNames:['animationend','webkitAnimationEnd']}),t({method:Sa,eventType:'Input',eventName:'input'}),t({method:Sa,eventType:'Orientation Change',eventName:'orientationchange'}),t({method:Sa,eventType:'Print',eventName:['afterprint','beforeprint']}),t({method:Sa,eventType:'Ready State Change',eventName:'readystatechange'}),t({method:Sa,eventType:'Touch Start',eventName:'touchstart'}),t({method:Sa,eventType:'Touch End',eventName:'touchend'}),t({method:Sa,eventType:'Touch Cancel',eventName:'touchcancel'}),t({method:Sa,eventType:'Transition Start',eventNames:['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart']}),t({method:Sa,eventType:'Transition Iteration',eventNames:['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration']}),t({method:Sa,eventType:'Transition End',eventNames:['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend']}),'child'===xa&&t({method:Sa,eventType:'IFrame Resized',eventName:'resize'})}function v(Sa,Ta,Ua,Va){return Ta!==Sa&&(!(Sa in Ua)&&(l(Sa+' is not a valid option for '+Va+'CalculationMethod.'),Sa=Ta),k(Va+' calculation method set to "'+Sa+'"')),Sa}function w(){la=v(la,ka,Pa,'height')}function z(){Ha=v(Ha,Ga,Qa,'width')}function A(){!0===$?(u('add'),L()):k('Auto Resize disabled')}function B(){k('Disable outgoing messages'),ya=!1}function C(){k('Remove event listener: Message'),f(window,'message',Y)}function D(){null!==da&&da.disconnect()}function E(){u('remove'),D(),clearInterval(qa)}function F(){B(),C(),!0===$&&E()}function G(){var Sa=document.createElement('div');Sa.style.clear='both',Sa.style.display='block',document.body.appendChild(Sa)}function H(){function Sa(){return{x:window.pageXOffset===c?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===c?document.documentElement.scrollTop:window.pageYOffset}}function Ta($a){var _a=$a.getBoundingClientRect(),ab=Sa();return{x:parseInt(_a.left,10)+parseInt(ab.x,10),y:parseInt(_a.top,10)+parseInt(ab.y,10)}}function Ua($a){var ab=$a.split('#')[1]||$a,bb=decodeURIComponent(ab),cb=document.getElementById(bb)||document.getElementsByName(bb)[0];c===cb?(k('In page link (#'+ab+') not found in iFrame, so sending to parent'),X(0,0,'inPageLink','#'+ab)):function(db){var eb=Ta(db);k('Moving to in page link (#'+ab+') at x: '+eb.x+' y: '+eb.y),X(eb.y,eb.x,'scrollToOffset')}(cb)}function Va(){''!==location.hash&&'#'!==location.hash&&Ua(location.href)}function Wa(){Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),function(_a){'#'!==_a.getAttribute('href')&&d(_a,'click',function(bb){bb.preventDefault(),Ua(this.getAttribute('href'))})})}function Xa(){d(window,'hashchange',Va)}function Ya(){setTimeout(Va,ha)}return oa.enable?function(){Array.prototype.forEach&&document.querySelectorAll?(k('Setting up location.hash handlers'),Wa(),Xa(),Ya()):l('In page linking not fully supported in this browser! (See README.md for IE8 workaround)')}():k('In page linking not enabled'),{findTarget:Ua}}function I(){k('Enable public methods'),Ia.parentIFrame={autoResize:function(Ta){return!0===Ta&&!1===$?($=!0,A()):!1==Ta&&!0==$&&($=!1,E()),$},close:function(){X(0,0,'close'),F()},getId:function(){return ua},getPageInfo:function(Ta){'function'==typeof Ta?(La=Ta,X(0,0,'pageInfo')):(La=function(){},X(0,0,'pageInfoStop'))},moveToAnchor:function(Ta){oa.findTarget(Ta)},reset:function(){W('parentIFrame.reset')},scrollTo:function(Ta,Ua){X(Ua,Ta,'scrollTo')},scrollToOffset:function(Ta,Ua){X(Ua,Ta,'scrollToOffset')},sendMessage:function(Ta,Ua){X(0,0,'message',JSON.stringify(Ta),Ua)},setHeightCalculationMethod:function(Ta){la=Ta,w()},setWidthCalculationMethod:function(Ta){Ha=Ta,z()},setTargetOrigin:function(Ta){k('Set targetOrigin: '+Ta),Aa=Ta},size:function(Ta,Ua){var Va=''+(Ta?Ta:'')+(Ua?','+Ua:'');T('size','parentIFrame.size('+Va+')',Ta,Ua)}}}function J(){0!==pa&&(k('setInterval: '+pa+'ms'),qa=setInterval(function(){T('interval','setInterval: '+pa)},Math.abs(pa)))}function K(){function Sa(bb){function cb(db){!1===db.complete&&(k('Attach listeners to '+db.src),db.addEventListener('load',Wa,!1),db.addEventListener('error',Xa,!1),$a.push(db))}'attributes'===bb.type&&'src'===bb.attributeName?cb(bb.target):'childList'===bb.type&&Array.prototype.forEach.call(bb.target.querySelectorAll('img'),cb)}function Ta(bb){$a.splice($a.indexOf(bb),1)}function Ua(bb){k('Remove listeners from '+bb.src),bb.removeEventListener('load',Wa,!1),bb.removeEventListener('error',Xa,!1),Ta(bb)}function Va(bb,cb,db){Ua(bb.target),T(cb,db+': '+bb.target.src,c,c)}function Wa(bb){Va(bb,'imageLoad','Image loaded')}function Xa(bb){Va(bb,'imageLoadFailed','Image load failed')}function Ya(bb){T('mutationObserver','mutationObserver: '+bb[0].target+' '+bb[0].type),bb.forEach(Sa)}var $a=[],_a=window.MutationObserver||window.WebKitMutationObserver,ab=function(){var bb=document.querySelector('body');return ab=new _a(Ya),k('Create body MutationObserver'),ab.observe(bb,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),ab}();return{disconnect:function(){'disconnect'in ab&&(k('Disconnect body MutationObserver'),ab.disconnect(),$a.forEach(Ua))}}}function L(){var Sa=0>pa;window.MutationObserver||window.WebKitMutationObserver?Sa?J():da=K():(k('MutationObserver not supported in this browser!'),J())}function M(Sa,Ta){var Va=0;return Ta=Ta||document.body,'defaultView'in document&&'getComputedStyle'in document.defaultView?(Va=document.defaultView.getComputedStyle(Ta,null),Va=null===Va?0:Va[Sa]):Va=function(Wa){var Xa=/^\d+(px)?$/i;if(Xa.test(Wa))return parseInt(Wa,_);var Ya=Ta.style.left,Za=Ta.runtimeStyle.left;return Ta.runtimeStyle.left=Ta.currentStyle.left,Ta.style.left=Wa||0,Wa=Ta.style.pixelLeft,Ta.style.left=Ya,Ta.runtimeStyle.left=Za,Wa}(Ta.currentStyle[Sa]),parseInt(Va,_)}function N(Sa){Sa>Ea/2&&(Ea=2*Sa,k('Event throttle increased to '+Ea+'ms'))}function O(Sa,Ta){for(var Ua=Ta.length,Va=0,Wa=0,Xa=g(Sa),Ya=Oa(),Za=0;Za<Ua;Za++)Va=Ta[Za].getBoundingClientRect()[Sa]+M('margin'+Xa,Ta[Za]),Va>Wa&&(Wa=Va);return Ya=Oa()-Ya,k('Parsed '+Ua+' HTML elements'),k('Element position calculated in '+Ya+'ms'),N(Ya),Wa}function P(Sa){return[Sa.bodyOffset(),Sa.bodyScroll(),Sa.documentElementOffset(),Sa.documentElementScroll()]}function Q(Sa,Ta){var Va=document.querySelectorAll('['+Ta+']');return 0===Va.length&&function(){return l('No tagged elements ('+Ta+') found on page'),document.querySelectorAll('body *')}(),O(Sa,Va)}function R(){return document.querySelectorAll('body *')}function S(Sa,Ta,Ua,Va){function Ya(){return!(Sa in{init:1,interval:1,size:1})}function Za(){return la in wa||fa&&Ha in wa}function $a(){k('No change in size detected')}var ab,bb;(function(){function cb(db,eb){var fb=Math.abs(db-eb)<=Ba;return!fb}return ab=c===Ua?Pa[la]():Ua,bb=c===Va?Qa[Ha]():Va,cb(ja,ab)||fa&&cb(Fa,bb)})()||'init'===Sa?(U(),function(){ja=ab,Fa=bb,X(ja,Fa,Sa)}()):function(){Ya()&&Za()?W(Ta):!(Sa in{interval:1})&&$a()}()}function T(Sa,Ta,Ua,Va){(function(){return Ca&&Sa in ga})()?k('Trigger event cancelled: '+Sa):(function(){Sa in{reset:1,resetPage:1,init:1}||(k('Trigger event: '+Ta),'resizeParent'!==Sa&&window.parentIFrame.sendMessage({event:Sa,description:Ta,target:event.target}))}(),'init'===Sa?S(Sa,Ta,Ua,Va):Ra(Sa,Ta,Ua,Va))}function U(){Ca||(Ca=!0,k('Trigger event lock on')),clearTimeout(Da),Da=setTimeout(function(){Ca=!1,k('Trigger event lock off'),k('--')},ha)}function V(Sa){ja=Pa[la](),Fa=Qa[Ha](),X(ja,Fa,Sa)}function W(Sa){var Ta=la;la=ka,k('Reset trigger event: '+Sa),U(),V('reset'),la=Ta}function X(Sa,Ta,Ua,Va,Wa){!0==ya&&(function(){c===Wa?Wa=Aa:k('Message targetOrigin: '+Wa)}(),function(){var $a;$a='object'==typeof Va?Va:ua+':'+(Sa+':'+Ta)+':'+Ua+(c===Va?'':':'+Va),k('Sending message to host page ('+$a+')'),za.postMessage(sa+$a,Wa)}())}function Y(Sa){function Ua(){return Sa.data.split(']')[1].split(':')[0]}function Va(){return Sa.data.substr(Sa.data.indexOf(':')+1)}function Wa(){return!('undefined'!=typeof module&&module.exports)&&'iFrameResize'in window}function Xa(){return Sa.data.split(':')[2]in{'true':1,'false':1}}function Ya(){var _a=Ua();_a in $a?$a[_a]():!Wa()&&!Xa()&&l('Unexpected message ('+Sa.data+')')}var $a={init:function(){'interactive'===document.readyState||'complete'===document.readyState?function(){na=Sa.data,za=Sa.source,m(),ia=!1,setTimeout(function(){ma=!1},ha)}():(k('Waiting for page ready'),d(window,'readystatechange',$a.initFromParent))},reset:function(){ma?k('Page reset ignored by init'):(k('Page size reset by host page'),V('resetPage'))},resize:function(){T('resizeParent','Parent window requested size check')},moveToAnchor:function(){oa.findTarget(Va())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var ab=Va();k('PageInfoFromParent called from parent: '+ab),La(JSON.parse(ab)),k(' --')},message:function(){var ab=Va();k('MessageCallback called from parent: '+ab),Ja(JSON.parse(ab)),k(' --')}};(function(){return sa===(''+Sa.data).substr(0,ta)})()&&function(){!1===ia?Ya():Xa()?$a.init():k('Ignored message of type "'+Ua()+'". Received before initialization.')}()}function Z(){'loading'!==document.readyState&&window.parent.postMessage('[iFrameResizerChild]Ready','*')}if('undefined'!=typeof window){var $=!0,_=10,aa='',ba=0,ca='',da=null,ea='',fa=!1,ga={resize:1,click:1},ha=128,ia=!0,ja=1,ka='bodyOffset',la=ka,ma=!0,na='',oa={},pa=32,qa=null,ra=!1,sa='[iFrameSizer]',ta=sa.length,ua='',wa={max:1,min:1,bodyScroll:1,documentElementScroll:1},xa='child',ya=!0,za=window.parent,Aa='*',Ba=0,Ca=!1,Da=null,Ea=16,Fa=1,Ga='scroll',Ha=Ga,Ia=window,Ja=function(){l('MessageCallback function not defined')},Ka=function(){},La=function(){},Ma={height:function(){return l('Custom height calculation function not defined'),document.documentElement.offsetHeight},width:function(){return l('Custom width calculation function not defined'),document.body.scrollWidth}},Na={},Oa=Date.now||function(){return new Date().getTime()},Pa={bodyOffset:function(){return document.body.offsetHeight+M('marginTop')+M('marginBottom')},offset:function(){return Pa.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Ma.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,P(Pa))},min:function(){return Math.min.apply(null,P(Pa))},grow:function(){return Pa.max()},lowestElement:function(){return Math.max(Pa.bodyOffset(),O('bottom',R()))},taggedElement:function(){return Q('bottom','data-iframe-height')}},Qa={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Ma.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Qa.bodyScroll(),Qa.documentElementScroll())},max:function(){return Math.max.apply(null,P(Qa))},min:function(){return Math.min.apply(null,P(Qa))},rightMostElement:function(){return O('right',R())},taggedElement:function(){return Q('right','data-iframe-width')}},Ra=h(S);d(window,'message',Y),Z()}})();